{% extends 'base.html' %}

{% block title %}Dashboard - FitRecommend{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="bi bi-speedometer2"></i> Meus Treinos Recomendados</h1>
    <p class="lead text-muted">Ol√°, {{ user.nome }}! Treinos selecionados para voc√™ üëã</p>
</div>

<div class="row g-3 mb-4">
    <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <p class="text-muted mb-1">Sess√µes registradas</p>
                    <h3 class="mb-0">{{ total_sessions }}</h3>
                </div>
                <div class="rounded-circle bg-primary bg-opacity-10 text-primary d-flex align-items-center justify-content-center" style="width:52px;height:52px;">
                    <i class="bi bi-list-check fs-4"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <p class="text-muted mb-1">Minutos totais</p>
                    <h3 class="mb-0">{{ total_minutes }}</h3>
                </div>
                <div class="rounded-circle bg-success bg-opacity-10 text-success d-flex align-items-center justify-content-center" style="width:52px;height:52px;">
                    <i class="bi bi-clock-history fs-4"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow-sm border-0">
            <div class="card-body d-flex align-items-center justify-content-between">
                <div>
                    <p class="text-muted mb-1">Calorias estimadas</p>
                    <h3 class="mb-0">{{ total_calories }}</h3>
                </div>
                <div class="rounded-circle bg-danger bg-opacity-10 text-danger d-flex align-items-center justify-content-center" style="width:52px;height:52px;">
                    <i class="bi bi-fire fs-4"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-3 mb-3">
        <div class="card text-center bg-primary text-white">
            <div class="card-body">
                <i class="bi bi-bullseye fs-1"></i>
                <h6 class="mt-2 mb-0">Objetivo</h6>
                <h4 class="mb-0">{{ user.get_objetivo_display }}</h4>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card text-center bg-success text-white">
            <div class="card-body">
                <i class="bi bi-bar-chart-fill fs-1"></i>
                <h6 class="mt-2 mb-0">N√≠vel</h6>
                <h4 class="mb-0">{{ user.get_nivel_display }}</h4>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card text-center bg-info text-white">
            <div class="card-body">
                <i class="bi bi-speedometer fs-1"></i>
                <h6 class="mt-2 mb-0">Peso</h6>
                <h4 class="mb-0">{{ user.peso }} kg</h4>
            </div>
        </div>
    </div>
    
    <div class="col-md-3 mb-3">
        <div class="card text-center bg-warning text-white">
            <div class="card-body">
                <i class="bi bi-rulers fs-1"></i>
                <h6 class="mt-2 mb-0">Altura</h6>
                <h4 class="mb-0">{{ user.altura }} cm</h4>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="bi bi-info-circle"></i> Sobre suas Recomenda√ß√µes
                </h5>
                <p class="mb-0">
                    Selecionamos treinos de intensidade <strong>{{ user.nivel }}</strong> 
                    adequados ao seu objetivo de <strong>{{ user.get_objetivo_display|lower }}</strong>.
                </p>
                <div class="mt-3 d-flex gap-2 flex-wrap">
                    <a href="{% url 'recommendation:profile' %}" class="btn btn-outline-primary">
                        <i class="bi bi-person"></i> Ver Perfil
                    </a>
                    <a href="{% url 'recommendation:history' %}" class="btn btn-outline-success">
                        <i class="bi bi-clock-history"></i> Ver Hist√≥rico
                    </a>
                    <a href="{% url 'recommendation:workout_list' %}" class="btn btn-outline-info">
                        <i class="bi bi-trophy"></i> Todos os Treinos
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<h3 class="mb-3"><i class="bi bi-trophy-fill text-warning"></i> Treinos para Voc√™</h3>
<div class="row mb-4">
    {% for workout in workouts %}
    <div class="col-md-6 col-lg-4 mb-3">
        <div class="card h-100 border-warning">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-trophy"></i> {{ workout.nome }}
                    </h5>
                    {% if workout.intensidade == 'baixa' %}
                        <span class="badge bg-success">{{ workout.get_intensidade_display }}</span>
                    {% elif workout.intensidade == 'media' %}
                        <span class="badge bg-warning">{{ workout.get_intensidade_display }}</span>
                    {% else %}
                        <span class="badge bg-danger">{{ workout.get_intensidade_display }}</span>
                    {% endif %}
                </div>
                
                <p class="card-text text-muted small">{{ workout.descricao|truncatewords:15 }}</p>
                
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div>
                        <i class="bi bi-clock text-primary"></i> {{ workout.duracao_minutos }} min
                    </div>
                    <div>
                        <i class="bi bi-fire text-danger"></i> {{ workout.calorias_estimadas }} kcal
                    </div>
                </div>
                
                <div class="d-flex gap-2">
                    <a href="{% url 'recommendation:workout_detail' workout.id %}" class="btn btn-sm btn-outline-primary flex-fill">
                        <i class="bi bi-eye"></i> Ver
                    </a>
                    <a href="{% url 'recommendation:history_create' %}" class="btn btn-sm btn-primary flex-fill">
                        <i class="bi bi-plus-circle"></i> Registrar
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12">
        <div class="alert alert-warning" role="alert">
            <i class="bi bi-exclamation-triangle"></i> Nenhum treino dispon√≠vel no momento. Execute o comando seed_data para popular o sistema.
        </div>
    </div>
    {% endfor %}
</div>

<div class="row">
    <div class="col-12">
        <div class="card bg-light">
            <div class="card-body text-center">
                <h5 class="card-title"><i class="bi bi-lightbulb"></i> Dica</h5>
                <p class="card-text">
                    Registre seus treinos no hist√≥rico para acompanhar seu progresso.
                    Lembre-se de consultar um profissional antes de iniciar qualquer programa de exerc√≠cios.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
